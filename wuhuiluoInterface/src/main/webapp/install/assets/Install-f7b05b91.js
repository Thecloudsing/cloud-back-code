import{r as s,u as z,j as e,m as L}from"./index-7b6c2287.js";import{L as P,S as R,T as j,F as a,R as H,C as S,I as n,B as D,a as E}from"./input-other-65c56b82.js";const A=()=>{const[v,d]=s.useState(!1),[r,g]=s.useState(""),[f,c]=s.useState(!1),[o,N]=s.useState(""),[y,p]=s.useState(!1),[l,b]=s.useState(""),[w,m]=s.useState(!1),[i,C]=s.useState(""),[I,h]=s.useState(!1),[u,_]=s.useState(""),[F,x]=s.useState(!1),B=z(),$=()=>{d(!0),L.open({key:localStorage.getItem("asyncKey")||"0",type:"loading",content:"initialize in database...",duration:0});const T={host:`${r}:${o}`,databaseName:l,username:i,password:u};E({type:"initialize",body:{url:"/database.do?operate=initialize",method:"post",params:T},then(){B("/finish")},_finally_(){d(!1)}})},q=()=>{$()};return e.jsx(P,{style:{minHeight:"100vh"},children:e.jsxs(R,{direction:"vertical",size:"large",style:{margin:"auto",width:"500px"},children:[e.jsx(j.Title,{level:1,children:"初始化数据库"}),e.jsx(j.Title,{level:4,children:"确认你的数据库是MySQL"}),e.jsxs(a,{wrapperCol:{span:24},onFinish:q,autoComplete:"off",children:[e.jsx(a.Item,{name:"host",children:e.jsxs(H,{children:[e.jsx(S,{span:18,children:e.jsxs("div",{className:"in",children:[e.jsx(n,{className:f||r!==""?"in-input":"",onFocus:()=>c(!0),onBlur:()=>c(!1),required:!0,pattern:"(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|[1-9])\\.((1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d)\\.){2}(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d)$",value:r,onChange:t=>g(t.target.value)}),e.jsx("span",{children:"数据库地址"})]})}),e.jsx(S,{span:6,children:e.jsxs("div",{className:"in",children:[e.jsx(n,{className:y||o!==""?"in-input":"",onFocus:()=>p(!0),onBlur:()=>p(!1),required:!0,pattern:"^([1-6][0-5]{2}[0-4][0-5]|[1-9]\\d{3}|[1-9]\\d{2}|[1-9]\\d{1}|[1-9])$",value:o,onChange:t=>N(t.target.value)}),e.jsx("span",{children:"端口号"})]})})]})}),e.jsx(a.Item,{name:"database",children:e.jsxs("div",{className:"in",children:[e.jsx(n,{className:w||l!==""?"in-input":"",onFocus:()=>m(!0),onBlur:()=>m(!1),required:!0,pattern:"^[\\w\\-_]{1,32}$",value:l,onChange:t=>b(t.target.value)}),e.jsx("span",{children:"数据库库名"})]})}),e.jsx(a.Item,{name:"username",children:e.jsxs("div",{className:"in",children:[e.jsx(n,{className:I||i!==""?"in-input":"",onFocus:()=>h(!0),onBlur:()=>h(!1),required:!0,pattern:"^\\w{1,16}$",value:i,onChange:t=>C(t.target.value)}),e.jsx("span",{children:"数据库用户名"})]})}),e.jsx(a.Item,{name:"password",children:e.jsxs("div",{className:"in",children:[e.jsx(n,{className:F||u!==""?"in-input":"",onFocus:()=>x(!0),onBlur:()=>x(!1),required:!0,pattern:"^\\w{4,16}$",value:u,onChange:t=>_(t.target.value)}),e.jsx("span",{children:"数据库密码"})]})}),e.jsx(a.Item,{name:"save",wrapperCol:{offset:17,span:24},children:e.jsx(D,{style:{width:"100px"},htmlType:"submit",loading:v,children:"确认"})})]})]})})};export{A as default};
